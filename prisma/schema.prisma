generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Gender {
  Male
  Female
}

model Member {
  id                 Int     @id @default(autoincrement())
  name               String
  email              String  @unique
  phone_number       String
  profile_image      String?
  department         String?
  college_name       String
  year_of_study      Int?
  location           String?
  attendance         Int     @default(0)
  teamId             Int?
  tShirtSize         String?
  certification_name String?
  roll_number        String?
  gender             Gender?
  team               Team?   @relation(fields: [teamId], references: [id])
}

model Team {
  id                Int              @id @default(autoincrement())
  scc_id            String?
  scc_password      String?
  title             String
  ps_id             Int
  gallery_images    String[]
  paymentVerified   Boolean          @default(false)
  team_members      Member[]
  tasks             Task[]
  problem_statement ProblemStatement @relation(fields: [ps_id], references: [id])
}

model ProblemStatement {
  id          Int      @id @default(autoincrement())
  psId        String   @unique
  title       String
  description String
  category    String
  tags        String[]
  isCustom    Boolean  @default(false)
  Team        Team[]
}

model Task {
  id          Int        @id @default(autoincrement())
  title       String
  description String?
  difficulty  String?
  round_num   Int
  points      Int        @default(0)
  completed   Boolean    @default(false)
  in_review   Boolean    @default(false)
  timestamp   DateTime   @default(now())
  teamId      Int
  reviewNotes String?
  status      TaskStatus @default(Pending)
  teamNotes   String?
  team        Team       @relation(fields: [teamId], references: [id])
}

model Admin {
  id       Int    @id @default(autoincrement())
  email    String @unique
  password String
}

model Announcement {
  id          Int      @id @default(autoincrement())
  title       String
  description String
  startTime   DateTime
  endTime     DateTime
}

model DeletedMember {
  id               Int      @id @default(autoincrement())
  original_id      Int
  name             String
  email            String
  phone_number     String
  profile_image    String?
  department       String?
  college_name     String
  year_of_study    Int?
  location         String?
  attendance       Int      @default(0)
  tShirtSize       String?
  teamId           Int?
  team_title       String?
  deleted_at       DateTime @default(now())
  deleted_by_admin String?
  deletion_reason  String?
}

enum TaskStatus {
  Pending
  InReview
  Completed
}
