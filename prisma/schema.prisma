generator client {
  provider      = "prisma-client-js"
  // Amazon Linux 2023 (Lambda Node.js 20) uses OpenSSL 3.x â€” target rhel-openssl-3.0.x
  binaryTargets = ["native", "rhel-openssl-3.0.x"]
  output        = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Member {
  id            Int     @id @default(autoincrement())
  name          String
  email         String  @unique
  phone_number  String
  profile_image String?
  department    String?
  college_name  String
  year_of_study Int?
  location      String?
  attendance    Int     @default(0)
  tShirtSize    String?

  // Relation
  teamId Int?
  team   Team? @relation(fields: [teamId], references: [id])
}

model Team {
  id                  Int               @id @default(autoincrement())
  scc_id              String?
  scc_password        String?
  title               String
  problem_statement   ProblemStatement @relation(fields: [ps_id], references: [id])
  ps_id               Int
  gallery_images      String[] // Store multiple image URLs
  paymentVerified     Boolean  @default(false) // Admin verification status

  // Relations
  team_members Member[]
  tasks        Task[]
}

model ProblemStatement {
  id          Int    @id @default(autoincrement())
  psId        String @unique
  title       String
  description String
  category    String
  tags        String[]
  isCustom   Boolean @default(false)

  Team Team[]
}

enum TaskStatus {
  Pending
  InReview
  Completed
}

model Task {
  id          Int      @id @default(autoincrement())
  title       String
  description String?
  difficulty  String? // could be "easy", "medium", "hard"
  round_num   Int
  points      Int      @default(0)
  status      TaskStatus @default(Pending)
  completed   Boolean  @default(false)
  in_review   Boolean  @default(false)
  timestamp   DateTime @default(now())
  teamNotes   String?
  reviewNotes String?
  
  // Relation
  teamId Int
  team   Team @relation(fields: [teamId], references: [id])
}

model Admin {
  id       Int    @id @default(autoincrement())
  email    String @unique
  password String
}


model Announcement {
  id          Int      @id @default(autoincrement())
  title       String
  description String
  startTime   DateTime
  endTime     DateTime
}
