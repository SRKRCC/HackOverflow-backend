generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Member {
  id            Int     @id @default(autoincrement())
  name          String
  email         String  @unique
  phone_number  String
  profile_image String?
  department    String?
  college_name  String
  year_of_study Int?
  location      String?
  attendance    Int     @default(0)

  // Relation
  teamId Int?
  team   Team? @relation(fields: [teamId], references: [id])
}

model Team {
  id                  Int               @id @default(autoincrement())
  scc_id              String?
  scc_password        String?
  title               String
  problem_statement   ProblemStatement @relation(fields: [ps_id], references: [id])
  ps_id Int
  gallery_images      String[] // Store multiple image URLs

  // Relations
  team_members Member[]
  tasks        Task[]
}

model ProblemStatement {
  id          Int    @id @default(autoincrement())
  psId        String @unique
  title       String
  description String
  category    String
  tags        String[]

  Team Team[]
}

enum TaskStatus {
  Pending
  InReview
  Completed
}

model Task {
  id          Int      @id @default(autoincrement())
  title       String
  description String?
  difficulty  String? // could be "easy", "medium", "hard"
  round_num   Int
  points      Int      @default(0)
  status      TaskStatus @default(Pending)
  completed   Boolean  @default(false)
  in_review   Boolean  @default(false)
  timestamp   DateTime @default(now())
  teamNotes   String?
  reviewNotes String?
  
  // Relation
  teamId Int
  team   Team @relation(fields: [teamId], references: [id])
}

model Admin {
  id       Int    @id @default(autoincrement())
  email    String @unique
  password String
}


model Announcement {
  id          Int      @id @default(autoincrement())
  title       String
  description String
  startTime   DateTime
  endTime     DateTime
}
